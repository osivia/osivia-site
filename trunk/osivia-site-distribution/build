#
#pré-requis
#
	#settings.xml


	<profile>
	<id>pack-portal</id>
	    <activation>
	    	<activeByDefault>true</activeByDefault>
	    </activation>
	  <properties>
		<portal-jbp-file>/home/jeanseb/distributions/jboss-portal-2.7.2.zip</portal-jbp-file>
		<portal-pack-dir>/home/jeanseb/distributions</portal-pack-dir>
	  </properties>
	</profile>

	# le répertoire ${portal-pack-dir} doit contenir jboss-portal-2.7.2.zip


#
#packaging du core
#

	cd toutatice-portail/core
	mvn release:prepare --batch-mode -Dtag=TEST-1.0_RC1 -DreleaseVersion=1.0-RC1 -DdevelopmentVersion=1.0-SNAPSHOT

	#génération des artefacts
	mvn release:perform

#
#packaging du cms
#

#dans /cms/pom.xml, mettre le numéro de version du core

	<toutatice.core.version>1.0-RC1</toutatice.core.version>


	mvn release:prepare --batch-mode -Dtag=TEST-1.0_RC1 -DreleaseVersion=1.0-RC1 -DdevelopmentVersion=1.0-SNAPSHOT
	mvn release:perform

#
#packaging de la distribution du socle
#

#dans /distribution/toutatice-portail-distribtion/pom.xml, préciser les versions

	<toutatice.core.version>1.0-RC1</toutatice.core.version>
	<toutatice.cms.version>1.0-RC1</toutatice.cms.version>

#generation de la release 

	mvn release:prepare --batch-mode -Dtag=TEST-1.0_RC1 -DreleaseVersion=1.0-RC1 -DdevelopmentVersion=1.0-SNAPSHOT 

#packaging de la distribution
#le livrable toutatice-portail-distribution-prod-[version].zip sera recopié dans ${portal-pack-dir}

	mvn release:perform

#
#packaging du livrable exemple : demo
#

#dans /demo/pom.xml, préciser les versions

	<toutatice.core.version>1.0-RC1</toutatice.core.version>
	<toutatice.cms.version>1.0-RC1</toutatice.cms.version>


#dans /demo/toutatice-portail-demo-distribution/pom.xml, préciser les versions


	<toutatice.distribution.version>1.0-RC1</toutatice.distribution.version>
	<toutatice.faq.version>1.0-RC1</toutatice.faq.version>
	<toutatice.rss.version>1.0-RC1</toutatice.rss.version>
	<toutatice.dashboard.ecm.version>1.0-RC1</toutatice.dashboard.ecm.version>


#generation de la release 

	mvn release:prepare --batch-mode -Dtag=TEST-1.0_RC1 -DreleaseVersion=1.0-RC1 -DdevelopmentVersion=1.0-SNAPSHOT 


#packaging de la distribution
#le livrable toutatice-portail-demo-distribution-prod-[version] .zip sera recopié dans ${portal-pack-dir}

	mvn release:perform -


